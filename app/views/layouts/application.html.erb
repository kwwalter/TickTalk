<!DOCTYPE html>
<html ng-app="TickTalk">
<head>
  <meta charset="utf-8">
  <title>TickTalk</title>
  <!-- might not need these anymore.. -->
  <!-- <link rel="stylesheet" href="app/assets/stylesheets/styles.css" charset="utf-8">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.min.js"></script>
  <script src="app/assets/javascripts/app.js"></script> -->

  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>
  <div ui-view>
  </div>

  <script type="text/ng-template" id="/home.html">
    <div ng-repeat="post in posts | orderBy:'-rating'">
      {{post.title}}, with a rating of {{post.rating}}!
      <span class="vote" ng-click="incrementRating(post)"> + </span>
      <span class="vote" ng-click="decrementRating(post)"> - </span>
      <br><br>
      <p>{{post.body}}</p><br>
      <!-- Tags: <span ng-repeat="tag in post.tags"> {{tag}} </span><br> -->
      <a href="#/posts/{{post.id}}">Comments</a>
      <hr>
    </div>
    </br>
    <form ng-submit="addPost()">
      <input type="text" ng-model="title" placeholder="Title of your post" />
      <input type="textarea" ng-model="body" placeholder="Body of your post" />
      <!-- <input type="text" ng-model="tags" placeholder="Comma-separated tags related to your post" /> -->
      <input type="submit" value="Post it!" />
    </form>
  </script>

  <script type="text/ng-template" id="/posts.html">
    Post title: <h4><a>{{post.title}}</a></h4>
    Post body: <p>{{post.body}}</p>
    <hr>

    <h5>Comments</h5>
    <div class="comment" ng-repeat="comment in post.comments | orderBy:'-rating'">
      <p>{{comment.commentBody}}</p><br>
      by: {{comment.author}}<br>
      Rating: {{comment.rating}}
      <span class="vote" ng-click="incrementRating(comment)"> + </span>
      <span class="vote" ng-click="decrementRating(comment)"> - </span> </br>
    </div>

    <form ng-submit="addComment()">
      <h4>Add a Comment</h4>
      <input type="textarea" ng-model="commentBody" placeholder="Body of the comment" />
      <input type="submit" value="Submit comment!" />
    </form>
  </script>
</body>
</html>
